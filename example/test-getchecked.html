<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test getChecked Fix</title>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="../tree.js"></script>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .test-section { margin: 20px 0; padding: 15px; border: 1px solid #ccc; }
        .output { background: #f5f5f5; padding: 10px; margin: 10px 0; border-radius: 4px; }
        button { padding: 8px 16px; margin: 5px; }
    </style>
</head>
<body>
    <h1>Test getChecked Fix</h1>
    
    <div class="test-section">
        <h3>Tree with IDs</h3>
        <div id="tree1"></div>
        <button onclick="testGetChecked()">Test getChecked</button>
        <div id="output1" class="output"></div>
    </div>

    <script>
        const testData = [
            {
                label: 'Root',
                id: 'root',
                open: true,
                children: [
                    { label: 'Child 1', id: 'child1' },
                    { label: 'Child 2', id: 'child2' },
                    { 
                        label: 'Child 3', 
                        id: 'child3',
                        children: [
                            { label: 'Grandchild 1', id: 'gc1' },
                            { label: 'Grandchild 2', id: 'gc2' }
                        ]
                    }
                ]
            }
        ];

        $('#tree1').radixTree({
            data: testData,
            onCheck: function(node, checkbox) {
                console.log('Node checked:', node.label, 'ID:', node._radixId);
            }
        });

        function testGetChecked() {
            const checked = $('#tree1').radixTree('getChecked');
            const output = $('#output1');
            
            let html = '<h4>getChecked Results:</h4>';
            if (checked.length === 0) {
                html += '<p>No checked nodes</p>';
            } else {
                html += '<ul>';
                checked.forEach(item => {
                    html += `<li><strong>${item.label}</strong> - ID: <code>${item.id}</code></li>`;
                });
                html += '</ul>';
            }
            
            html += '<h4>Raw Data:</h4>';
            html += '<pre>' + JSON.stringify(checked, null, 2) + '</pre>';
            
            output.html(html);
        }

        // Check some nodes for testing
        setTimeout(() => {
            $('#tree1').radixTree('setChecked', 'root', true);
            $('#tree1').radixTree('setChecked', 'child1', true);
            $('#tree1').radixTree('setChecked', 'gc1', true);
        }, 1000);
    </script>
</body>
</html> 