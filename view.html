<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
  <script src="https://code.jquery.com/jquery-3.7.1.slim.min.js"
    integrity="sha256-kmHvs0B+OpCW5GVHUNjv9rOmY0IvSIRcf7zGUDTDQM8=" crossorigin="anonymous"></script>
  <script src="tree.js"></script>
  <!-- <link rel="stylesheet" href="tree.css"> -->
  <style>
    html {
      height: 100%;
      font-family: Proza, sans-serif;
      font-size: clamp(18px, 100vw / var(--width), 20px);
      font-feature-settings: 'onum', 'pnum';
      font-weight: 300;
      margin: auto;
      max-width: 500px;
      margin-top: 120px;
      font-size: 20px;
    }
  </style>
</head>

<body>
  <div class="demo-tree"></div>
  <div class="radix-tree-small"></div>
  <div class="radix-tree-large"></div>
  <script>
    $(document).ready(() => {
      console.log('Init');
      const data = [
        {
          label: 'Universe',
          open: true,
          children: [
            {
              label: 'Galaxies',
              open: true,
              children: [
                {
                  label: 'Milky Way',
                  open: false,
                  children: [
                    {
                      label: 'Solar System',
                      open: false,
                      children: [
                        {
                          label: 'Planets',
                          open: false,
                          children: [
                            { label: 'Mercury' },
                            { label: 'Venus' },
                            {
                              label: 'Earth', open: true, children: [
                                { label: 'Moon', open: false },
                                { label: 'ISS', open: false }
                              ]
                            },
                            {
                              label: 'Mars', open: false, children: [
                                { label: 'Phobos', disabled: true, checked: true },
                                { label: 'Deimos' }
                              ]
                            },
                            {
                              label: 'Jupiter', open: false, children: [
                                { label: 'Io' },
                                { label: 'Europa' },
                                { label: 'Ganymede' },
                                { label: 'Callisto' }
                              ]
                            },
                            { label: 'Saturn' },
                            { label: 'Uranus' },
                            { label: 'Neptune' }
                          ]
                        },
                        {
                          label: 'Asteroid Belt',
                          open: false,
                          children: [
                            { label: 'Ceres' },
                            { label: 'Vesta' },
                            { label: 'Pallas' },
                            { label: 'Hygiea' }
                          ]
                        }
                      ]
                    },
                    {
                      label: 'Alpha Centauri System',
                      open: false,
                      children: [
                        { label: 'Alpha Centauri A' },
                        { label: 'Alpha Centauri B' },
                        { label: 'Proxima Centauri' }
                      ]
                    }
                  ]
                },
                {
                  label: 'Andromeda',
                  open: false,
                  children: [
                    { label: 'Star System 1' },
                    { label: 'Star System 2' }
                  ]
                }
              ]
            },
            {
              label: 'Black Holes',
              open: false,
              children: [
                {
                  label: 'Supermassive', open: false, children: [
                    { label: 'Sagittarius A*' },
                    { label: 'M87*' }
                  ]
                },
                {
                  label: 'Stellar-mass', open: false, children: [
                    { label: 'Cygnus X-1' },
                    { label: 'V404 Cygni' }
                  ]
                }
              ]
            },
            {
              label: 'Nebulae',
              open: false,
              children: [
                { label: 'Orion Nebula' },
                { label: 'Crab Nebula' },
                { label: 'Eagle Nebula' }
              ]
            }
          ]
        },
        // {
        //   label: 'Multiverse',
        //   open: false,
        //   children: [
        //     { label: 'Parallel Universe 1' },
        //     {
        //       label: 'Parallel Universe 2', open: false, children: [
        //         {
        //           label: 'Alt Galaxy', open: false, children: [
        //             {
        //               label: 'Alt Solar System', open: false, children: [
        //                 {
        //                   label: 'Alt Earth', open: false, children: [
        //                     { label: 'Alt Moon' },
        //                     { label: 'Alt Mars' }
        //                   ]
        //                 }
        //               ]
        //             }
        //           ]
        //         }
        //       ]
        //     }
        //   ]
        // }
      ];
      const demoData = [
        {
          label: 'Big Folder',
          open: false,
          infinite: true, // enables infinite scroll for this node
          lazy: true,     // triggers lazyLoad for paging
          badge: 100,
          tags: ['infinite', 'files']
        }
      ];

      function infiniteLazyLoad(node, done, opts, delay) {
        const total = 100;
        const page = opts && opts.page ? opts.page : 1;
        const pageSize = opts && opts.pageSize ? opts.pageSize : 20; // Controlled by pageSize option
        const start = (page - 1) * pageSize;
        const end = Math.min(start + pageSize, total);
        const children = [];
        for (let i = start; i < end; i++) {
          children.push({
            label: 'File ' + (i + 1),
            badge: (i % 2 === 0) ? 'even' : 'odd',
            tags: (i % 10 === 0) ? ['milestone'] : []
          });
        }
        setTimeout(() => {
          done(children, end < total); // hasMore = true if more pages
        }, delay); // Use the dynamic delay
      }

      // // Example 1: Large page size (pagination and scroll enabled)
      // $('.radix-tree-large').radixTree({
      //   data: demoData,
      //   lazyLoad: infiniteLazyLoad,
      //   pageSize: 20,        // Pagination and scroll enabled (>= 10)
      //   lazyLoadDelay: 500   // Delay for each page load
      // });

      // // Example 2: Small page size (no pagination or scroll)
      // $('.radix-tree-small').radixTree({
      //   data: demoData,
      //   lazyLoad: infiniteLazyLoad,
      //   pageSize: 5,         // No pagination or scroll (< 10)
      //   lazyLoadDelay: 800
      // });

      $('.demo-tree').radixTree({
        data: data
      })
    });
  </script>
</body>

</html>